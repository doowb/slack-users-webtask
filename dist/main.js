exports = module.exports;
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.slackUsersWt=e()}}(function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";function r(e){return 7*e.length}function o(e){return function(t,n){return t?(e.writeHead(500,{"Content-Type":"application/json"}),void e.end(JSON.stringify({ok:!1,error:t.message}))):(e.writeHead(200,{"Content-Type":"image/svg+xml"}),void e.end(n))}}var i=e("slack-users"),a=e("handlebars"),s=e("./lib/helpers");t.exports=function(e,t,n){var u=o(n),l='<svg xmlns="http://www.w3.org/2000/svg" width="{{tw}}" height="16">\n  <rect rx="3" width="{{tw}}" height="16" fill="#555" />\n  <rect rx="3" x="{{lw}}" width="{{rw}}" height="16" fill="{{color}}" />\n  <path d="M{{lw}} 0h{{sep}}v16h-{{sep}}z" fill="{{color}}" />\n  <g text-anchor="middle" font-family="Verdana" font-size="11">\n    <text fill="#010101" fill-opacity=".3" x="{{round (divide lw 2)}}" y="12">{{title}}</text>\n    <text fill="#fff" x="{{round (divide lw 2)}}" y="11">{{title}}</text>\n\n    <text fill="#010101" fill-opacity=".3" x="{{add lw (round (divide lw 2))}}" y="12">{{value}}</text>\n    <text fill="#fff" x="{{add lw (round (divide lw 2))}}" y="11">{{value}}</text>\n  </g>\n</svg>\n';a.registerHelper(s);var d=e.data.SLACK_TEAM,c=e.data.SLACK_TOKEN;if(!d)return u(new Error("Invalid SLACK_TEAM property."));if(!c)return u(new Error("Invalid SLACK_TOKEN property."));var f={team:d,token:c};i(f,function(e,t){if(e)return u(e);t=t.filter(function(e){return"USLACKBOT"!=e.id&&!e.is_bot&&!e.deleted});var n=t.filter(function(e){return"active"===e.presence}),o={total:t.length,active:n.length,title:"slack",color:"#E01563",pad:10,sep:6};o.value=o.active+"/"+o.total,o.lw=o.pad+r(o.title)+o.sep,o.rw=o.sep+r(o.value)+o.pad,o.tw=o.lw+o.rw;var i=a.compile(l);u(null,i(o))})}},{"./lib/helpers":2,handlebars:void 0,"slack-users":3}],2:[function(e,t,n){"use strict";t.exports={round:function(e){return Math.round(e)},divide:function(e,t){return e/t},add:function(e,t){return e+t}}},{}],3:[function(e,t,n){"use strict";function r(e,t){return"https://"+e+".slack.com/api/users.list?token="+t+"&presence=1"}var o=e("extend-shallow"),i=e("simple-get");t.exports=function(e,t){"function"==typeof e&&(t=e,e={});var n=o({},e),a=n.team,s=n.token;return a?s?void i.concat({url:r(a,s),json:!0},function(e,n,r){return e||n&&200!==n.statusCode?t(e):r.ok===!1?t(new Error(r.error)):void t(null,r.members)}):t(new Error('Invalid "token" option.')):t(new Error('Invalid "team" option.'))}},{"extend-shallow":4,"simple-get":6}],4:[function(e,t,n){"use strict";function r(e,t){for(var n in t)o(t,n)&&(e[n]=t[n])}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=e("is-extendable");t.exports=function(e){i(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var o=arguments[n];i(o)&&r(e,o)}return e}},{"is-extendable":5}],5:[function(e,t,n){"use strict";t.exports=function(e){return"undefined"!=typeof e&&null!==e&&("object"==typeof e||"function"==typeof e)}},{}],6:[function(e,t,n){function r(e,t){e="string"==typeof e?{url:e}:i(e),t=u(t),e.url&&o(e),null==e.headers&&(e.headers={}),null==e.maxRedirects&&(e.maxRedirects=10);var n=e.json?JSON.stringify(e.body):e.body;e.body=void 0,n&&!e.method&&(e.method="POST"),e.method&&(e.method=e.method.toUpperCase()),e.json&&(e.headers.accept="application/json"),e.json&&n&&(e.headers["content-type"]="application/json");var d=Object.keys(e.headers).some(function(e){return"accept-encoding"===e.toLowerCase()});d||(e.headers["accept-encoding"]="gzip, deflate");var c="https:"===e.protocol?s:a,f=c.request(e,function(n){if(n.statusCode>=300&&n.statusCode<400&&"location"in n.headers)return e.url=n.headers.location,o(e),n.resume(),e.maxRedirects-=1,void(e.maxRedirects>0?r(e,t):t(new Error("too many redirects")));var i="function"==typeof l&&"HEAD"!==e.method;t(null,i?l(n):n)});return f.on("error",t),f.end(n),f}function o(e){var t=d.parse(e.url);t.hostname&&(e.hostname=t.hostname),t.port&&(e.port=t.port),t.protocol&&(e.protocol=t.protocol),t.auth&&(e.auth=t.auth),e.path=t.path,delete e.url}t.exports=r;var i=e("xtend"),a=e("http"),s=e("https"),u=e("once"),l=e("unzip-response"),d=e("url");t.exports.concat=function(e,t){return r(e,function(n,r){if(n)return t(n);var o=[];r.on("data",function(e){o.push(e)}),r.on("end",function(){var n=Buffer.concat(o);if(e.json)try{n=JSON.parse(n.toString())}catch(e){return t(e,r,n)}t(null,r,n)})})},["get","post","put","patch","head","delete"].forEach(function(e){t.exports[e]=function(t,n){return"string"==typeof t&&(t={url:t}),t.method=e.toUpperCase(),r(t,n)}})},{http:void 0,https:void 0,once:void 0,"unzip-response":7,url:void 0,xtend:void 0}],7:[function(e,t,n){"use strict";var r=e("zlib");t.exports=function(e){if(["gzip","deflate"].indexOf(e.headers["content-encoding"])!==-1){var t=r.createUnzip();t.httpVersion=e.httpVersion,t.headers=e.headers,t.rawHeaders=e.rawHeaders,t.trailers=e.trailers,t.rawTrailers=e.rawTrailers,t.setTimeout=e.setTimeout.bind(e),t.statusCode=e.statusCode,t.statusMessage=e.statusMessage,t.socket=e.socket,e.on("close",function(){t.emit("close")}),e=e.pipe(t)}return e}},{zlib:void 0}]},{},[1])(1)});